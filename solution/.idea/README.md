# Антифрод REST API (олимпиадное задание)

Главный источник требований к API — OpenAPI-спецификация: `openapi.yml`.

## Быстрый старт

- Рекомендованный старт (для новичков): `docs/getting-started.md`.
- Полный текст задания и баллы: `docs/assignment.md`.
- Правила DSL (уровни поддержки, проверка, выполнение): `docs/dsl.md`.
- Локальный запуск и быстрая проверка: `docs/local-run.md`.
- FAQ и частые ошибки: `docs/faq.md`.
- Словарь терминов: `docs/glossary.md`.

## Структура репозитория

- `openapi.yml` — описание API.
- `docs/` — документация к заданию (что сделать и как это проверяется).

---

## Changelog

### v1.0.2 

- Добавлена таблица кодов ошибок с HTTP-статусами.
- Удалён код ошибки `USER_NOT_FOUND`, вместо него используется `NOT_FOUND`.
- Удалены коды ошибки `DSL_UNSUPPORTED_TIER` и `DSL_TOO_COMPLEX`, а также вся логика связанная с ними.
- Уточнено, что содержимое `message` и `fieldErrors[].issue` не проверяется автотестами.
- Добавлена сортировка пользователей для `GET /users`: по `id` (ASC).
- Добавлены правила валидации `page`/`size` (min/max) с 422 при невалидных значениях.
- Уточнена нормализация DSL: убираются лишние и не влияющие на логику скобки.
- Уточнено поле `near`: 2 символа до и 2 после позиции ошибки
- Исправлены мелкие опечатки.
- `gmv` теперь обязательный в MerchantRiskRow.

### v1.0.1

- OpenAPI: добавлен `expiresIn` в пример ответа авторизации, добавлен код 409 для `PUT /fraud-rules/{id}`.
- OpenAPI: убрана формулировка «если включена уникальность имени» - уникальность имени правила теперь обязательна.
- Обновлены примеры запуска в `local-run.md`.
- Исправлены мелкие опечатки.
